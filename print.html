<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Mooshroom Book</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded "><a href="data-types.html"><strong aria-hidden="true">1.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="packet-structure.html"><strong aria-hidden="true">2.</strong> Packet Structure</a></li><li class="chapter-item expanded affix "><li class="part-title">Stages</li><li class="chapter-item expanded "><a href="handshaking/handshaking.html"><strong aria-hidden="true">3.</strong> Handshaking</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="handshaking/client.html"><strong aria-hidden="true">3.1.</strong> Client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="handshaking/client/handshake.html"><strong aria-hidden="true">3.1.1.</strong> 0x00 - Handshake</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><a href="status/status.html"><strong aria-hidden="true">4.</strong> Status</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="status/client.html"><strong aria-hidden="true">4.1.</strong> Client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="status/client/status-request.html"><strong aria-hidden="true">4.1.1.</strong> 0x00 - StatusRequest</a></li><li class="chapter-item expanded "><a href="status/client/ping-request.html"><strong aria-hidden="true">4.1.2.</strong> 0x01 - PingRequest</a></li></ol></li><li class="chapter-item expanded "><a href="status/server.html"><strong aria-hidden="true">4.2.</strong> Server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="status/server/status-response.html"><strong aria-hidden="true">4.2.1.</strong> 0x00 - StatusResponse</a></li><li class="chapter-item expanded "><a href="status/server/ping-response.html"><strong aria-hidden="true">4.2.2.</strong> 0x01 - PingResponse</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><a href="login/login.html"><strong aria-hidden="true">5.</strong> Login</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="login/client.html"><strong aria-hidden="true">5.1.</strong> Client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="login/client/login-start.html"><strong aria-hidden="true">5.1.1.</strong> 0x00 - LoginStart</a></li><li class="chapter-item expanded "><a href="login/client/encryption-response.html"><strong aria-hidden="true">5.1.2.</strong> 0x01 - EncryptionResponse</a></li></ol></li><li class="chapter-item expanded "><a href="login/server.html"><strong aria-hidden="true">5.2.</strong> Server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="login/server/disconnect.html"><strong aria-hidden="true">5.2.1.</strong> 0x00 - Disconnect</a></li><li class="chapter-item expanded "><a href="login/server/encryption-request.html"><strong aria-hidden="true">5.2.2.</strong> 0x01 - EncryptionRequest</a></li><li class="chapter-item expanded "><a href="login/server/login-success.html"><strong aria-hidden="true">5.2.3.</strong> 0x02 - LoginSuccess</a></li><li class="chapter-item expanded "><a href="login/server/set-compression.html"><strong aria-hidden="true">5.2.4.</strong> 0x03 - SetCompression</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><a href="play/play.html"><strong aria-hidden="true">6.</strong> Play</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="play/client.html"><strong aria-hidden="true">6.1.</strong> Client</a></li><li class="chapter-item expanded "><a href="play/server.html"><strong aria-hidden="true">6.2.</strong> Server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="play/server/spawn-entity.html"><strong aria-hidden="true">6.2.1.</strong> 0x00 - SpawnEntity</a></li><li class="chapter-item expanded "><a href="play/server/spawn-player.html"><strong aria-hidden="true">6.2.2.</strong> 0x02 - SpawnPlayer</a></li><li class="chapter-item expanded "><a href="play/server/entity-animation.html"><strong aria-hidden="true">6.2.3.</strong> 0x03 - EntityAnimation</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Mooshroom Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="the-mooshroom-book"><a class="header" href="#the-mooshroom-book">The Mooshroom Book</a></h1>
<p>Client folders contain <code>c -&gt; s</code> packets</p>
<p>Server folders contain <code>s -&gt; c</code> packets</p>
<p>Packet documentation will only contain the structure of the packets body. The outer packet structure can be found on the <a href="./packet-structure.html">Packet Structure</a> page.</p>
<p>This is documentation on the minecraft protocal centered around rust development. Each page will have a table of the raw segments with data types, followed by a rust example.</p>
<table><thead><tr><th>field_name</th><th>type</th><th>condition</th></tr></thead><tbody>
<tr><td>entity_id</td><td><code>u16</code></td><td></td></tr>
<tr><td>entity_name_length</td><td><code>VarInt</code></td><td></td></tr>
<tr><td>entity_name</td><td><code>[char;entity_name_length]</code> string</td><td></td></tr>
<tr><td>has_position</td><td>bool</td><td></td></tr>
<tr><td>x</td><td><code>f32</code></td><td><code>has_position</code></td></tr>
<tr><td>y</td><td><code>f32</code></td><td><code>has_position</code></td></tr>
<tr><td>z</td><td><code>f32</code></td><td><code>has_position</code></td></tr>
</tbody></table>
<p>if <code>condition</code> is not met, the field is 0 bytes. If <code>condition</code> is not specified, it is always in the packet.</p>
<pre><code class="language-rust noplayground">struct EntityExample {
    pub entity_id: u16,
    pub entity_name: String,
    pub location: Option&lt;Vec3&lt;f32&gt;&gt;
}
</code></pre>
<p>These examples are simplified versions of the structs found in <a href="https://github.com/pigeonhands/mooshroom">mooshroom</a>, and thus make use of some of its macros.</p>
<h3 id="readfn-params"><a class="header" href="#readfn-params"><code>#[read(fn, params...)]</code></a></h3>
<hr />
<p>Uses the <code>fn</code> parameter to parse the field it is attached to, and optionally passing in some previously parsed fields. Normally used to read a field that is contitional on a bitflag.</p>
<p>This is usualy used with <code>Option&lt;T&gt;</code>, but because it is manually parsing the field, it bypasses the automatic logic of reading a <code>bool</code> before <code>T</code> specified in the <a href="./data-types.html">data-types</a> unless it is used as <code>Option::read</code>.</p>
<pre><code class="language-rust noplayground">struct Example {
    pub packet_type: f32,
    pub bitflag: u8,
    #[read(read_conditional_field, bitflag)]
    pub if_first_bit_set: Option&lt;VarInt&gt;
}
fn read_conditional_field(
    reader: &amp;mut std::io::Reader, 
    bitflag: &amp;u8
) -&gt; Result&lt;Option&lt;VarInt&gt;&gt; {
    if (bitflag &amp; 1) == 0 {
        None
    }else{
        Some(VarInt::read(reader))
    }
}
</code></pre>
<h3 id="value_typet--reprt"><a class="header" href="#value_typet--reprt"><code>#[value_type(T)] / #[repr(T)]</code></a></h3>
<hr />
<p>Signifies that the numeric enum type is <code>T</code>.
so for example, in terms of protocal reading, the two packet <code>struct</code>s below are equivilent.</p>
<pre><code class="language-rust noplayground">#[value_type(VarInt)]
enum ExampleEnum {
    Example0 = 0,
    Example1 = 1
}

struct PacketVarInt {
    pub packet_type: VarInt
}


struct PacketEnum {
    pub packet_type: ExampleEnum
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="data-types"><a class="header" href="#data-types">Data Types</a></h2>
<p>These will be used to construct packets</p>
<h2 id="primitives"><a class="header" href="#primitives">Primitives</a></h2>
<hr />
<p>The primitive data types are all read using big-endian byte format.</p>
<ul>
<li>bool (1 byte)</li>
<li>i8</li>
<li>u8</li>
<li>i16</li>
<li>u16</li>
<li>i32</li>
<li>u32</li>
<li>i64</li>
<li>u64</li>
<li>f32</li>
<li>f64</li>
</ul>
<h1 id="complex-types"><a class="header" href="#complex-types">Complex Types</a></h1>
<p>Complex types are used used in the <code>rust</code> examples of packets.</p>
<ul>
<li><a href="./data-types.html#varint--varlong"><code>VarInt</code> / <code>VarLong</code></a></li>
<li><a href="./data-types.html#optiont"><code>Option&lt;T&gt;</code></a></li>
<li><a href="./data-types.html#vect"><code>Vec&lt;T&gt;</code></a></li>
<li><a href="./data-types.html#tn-array"><code>[T;N]</code> array</a></li>
<li><a href="./data-types.html#string"><code>String</code></a></li>
<li><a href="./data-types.html#identifier"><code>Identifier</code></a></li>
<li><a href="./data-types.html#chat"><code>Chat</code></a></li>
<li><a href="./data-types.html#jsont"><code>Json&lt;T&gt;</code></a></li>
<li><a href="./data-types.html#vec3t"><code>Vec3&lt;T&gt;</code></a></li>
<li><a href="./data-types.html#position"><code>Position</code></a></li>
<li><a href="./data-types.html#uuid"><code>Uuid</code></a></li>
<li><a href="./data-types.html#angle"><code>Angle</code></a></li>
</ul>
<h3 id="varint--varlong"><a class="header" href="#varint--varlong"><code>VarInt</code> / <code>VarLong</code></a></h3>
<hr />
<p>A variable length signed integer read from LSB to MSB. The most significant bit of each byte indicates if there is another byte in the <code>VarInt</code>.</p>
<table><thead><tr><th>type</th><th>max bytes</th></tr></thead><tbody>
<tr><td>VarInt</td><td>5</td></tr>
<tr><td>VarLong</td><td>10</td></tr>
</tbody></table>
<p>For example, encoding the integer <code>12345</code></p>
<table><thead><tr><th>format</th><th>data</th></tr></thead><tbody>
<tr><td>Hex</td><td>0x3039</td></tr>
<tr><td>Binary</td><td>0000110000111001</td></tr>
<tr><td>VarInt</td><td>1011100100011000</td></tr>
</tbody></table>
<pre><code>           LSB         MSB
            |           |
VarInt [1 0111001] [0 0011000]
        ^           ^
        |           |
        |     Indicates this is the last byte
 Indicates there is another byte
</code></pre>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// least siginificant bits of each part with the indicator discarded
let lsb = 0b_0111001;
let msb = 0b_0011000;
println!(&quot;0x{:x} == 0x{:x}&quot;, (msb &lt;&lt; 7) | lsb, 0b0000110000111001)
<span class="boring">}
</span></code></pre></pre>
<details>
<summary> reading </summary>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn read(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    let mut num_read = 0;
    let mut result = 0;
    loop {
        let read = reader.read_u8()?;
        let value = i32::from(read &amp; 0b0111_1111);
        result |= value.overflowing_shl(7 * num_read).0;
        num_read += 1;
        if read &amp; 0b1000_0000 == 0 {
            break;
        }
        if num_read &gt; 5 {
            return Err(MoshroomError::VarIntTooLong);
        }
    }
    Ok(Self(result))
}
<span class="boring">}
</span></code></pre></pre>
</details>
<details>
<summary> writing </summary>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn write(&amp;self, writer: &amp;mut impl io::Write) -&gt; Result&lt;()&gt; {
    let mut x = self.0 as u64;
    // Ensure at least one byte is always written
    writer
        .write_u8(((x &amp; 0b0111_1111) | (0b1000_0000 * ((x &gt;&gt; 7 != 0) as u64))) as u8)
        .map_err(MoshroomError::IoError)?;
    x &gt;&gt;= 7;
    loop {
        if x == 0 {
            break;
        }
        let mut temp = (x &amp; 0b0111_1111) as u8;
        x &gt;&gt;= 7;
        if x != 0 {
            temp |= 0b1000_0000;
        }
        writer.write_u8(temp).map_err(MoshroomError::IoError)?;
    }
    Ok(())
}
<span class="boring">}
</span></code></pre></pre>
</details>
<p><a href="https://github.com/pigeonhands/mooshroom/blob/master/mooshroom-core/src/varint.rs">mooshroom implimentation</a></p>
<h3 id="optiont"><a class="header" href="#optiont"><code>Option&lt;T&gt;</code></a></h3>
<hr />
<p>A <code>bool</code>, and an optional <code>T</code> if <code>bool</code> is true.</p>
<table><thead><tr><th>exists</th><th>value</th></tr></thead><tbody>
<tr><td><code>bool</code></td><td><code>T</code> or nothing</td></tr>
</tbody></table>
<details>
<summary> reading </summary>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn read(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    if bool::read(reader)? {
        Ok(Some(T::read(reader)?))
    } else {
        Ok(None)
    }
}
<span class="boring">}
</span></code></pre></pre>
</details>
<details>
<summary> writing </summary>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn write(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    if let Some(t) = &amp;self {
        true.write(writer)?;
        t.write(writer)?;
    } else {
        false.write(writer)?;
    }
    Ok(())
}
<span class="boring">}
</span></code></pre></pre>
</details>
<h3 id="vect"><a class="header" href="#vect"><code>Vec&lt;T&gt;</code></a></h3>
<hr />
<p>A variable length array of <code>T</code>.</p>
<table><thead><tr><th>length</th><th>0..length</th></tr></thead><tbody>
<tr><td><a href="./data-types.html#varint--varlong">varint</a></td><td><code>T</code></td></tr>
</tbody></table>
<details>
<summary> reading </summary>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn read(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    let len = VarInt::read(reader)?.0 as usize;

    let mut buffer = Vec::with_capacity(len);
    for _ in 0..len {
        buffer.push(T::read(reader)?);
    }
    Ok(buffer)
}
<span class="boring">}
</span></code></pre></pre>
</details>
<details>
<summary> writing </summary>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn write(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    VarInt(self.len() as i32).write(writer)?;
    writer.write_all(self.as_bytes())?;
    Ok(())
}
<span class="boring">}
</span></code></pre></pre>
</details>
<h3 id="tn-array"><a class="header" href="#tn-array"><code>[T;N]</code> array</a></h3>
<hr />
<p>A fxed length array of <code>T</code>.</p>
<table><thead><tr><th>0..N</th></tr></thead><tbody>
<tr><td><code>T</code></td></tr>
</tbody></table>
<details>
<summary> reading </summary>
Uses `MaybeUninit` so `T` dosent need to impliment `Default`.
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn read(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    unsafe {
        let mut buffer: [MaybeUninit&lt;T&gt;; N] = MaybeUninit::uninit().assume_init();
        for i in buffer.iter_mut() {
            i.write(T::read(reader)?);
        }
        Ok(buffer.as_ptr().cast::&lt;[T; N]&gt;().read())
    }
}
<span class="boring">}
</span></code></pre></pre>
</details>
<details>
<summary> writing </summary>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn write(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    for i in self.iter() {
        i.write(writer)?;
    }
    Ok(())
}
<span class="boring">}
</span></code></pre></pre>
</details>
<h3 id="string"><a class="header" href="#string"><code>String</code></a></h3>
<hr />
<p>A variable-length unicode string</p>
<table><thead><tr><th>length</th><th>string-body</th></tr></thead><tbody>
<tr><td><a href="./data-types.html#varint--varlong">varint</a></td><td>variable</td></tr>
</tbody></table>
<details>
<summary> reading </summary>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn read(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    let len = VarInt::read(reader)?;

    let s = {
        let mut buffer: Vec&lt;u8&gt; = vec![0; len.0 as usize];
        reader.read_exact(&amp;mut buffer)?;
        String::from_utf8(buffer).map_err(MoshroomError::InvalidString)?
    };
    Ok(s)
}
<span class="boring">}
</span></code></pre></pre>
</details>
<details>
<summary> writing </summary>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn write(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    VarInt(self.len() as i32).write(writer)?;
    writer.write_all(self.as_bytes())?;
    Ok(())
}
<span class="boring">}
</span></code></pre></pre>
</details>
<h3 id="identifier"><a class="header" href="#identifier"><code>Identifier</code></a></h3>
<hr />
<p>A <a href="./data-types.html#string">string</a> in <code>namespace:value</code> format. e.g. <code>minecraft:ambient.cave</code>.</p>
<p>An identifier is limited to a limited character set, and if no namespace is contained, <code>minecraft</code> is used. </p>
<p>e.g. if <code>ambient.cave</code> is recieved, it is atcualy <code>minecraft:ambient.cave</code>.</p>
<table><thead><tr><th>segment</th><th>regex</th></tr></thead><tbody>
<tr><td>namespace</td><td><code>[a-z0-9.-_]</code></td></tr>
<tr><td>value</td><td><code>[a-z0-9.-_/]</code></td></tr>
</tbody></table>
<h3 id="chat"><a class="header" href="#chat"><code>Chat</code></a></h3>
<hr />
<p>A <a href="./data-types.html#string">string</a> in rich text format.</p>
<h3 id="jsont"><a class="header" href="#jsont"><code>Json&lt;T&gt;</code></a></h3>
<hr />
<p>A <a href="./data-types.html#string">string</a> deseralized as <code>json</code> into <code>T</code>.</p>
<h3 id="vec3t"><a class="header" href="#vec3t"><code>Vec3&lt;T&gt;</code></a></h3>
<hr />
<p>Vector of dimention 3</p>
<pre><code class="language-rust noplayground">struct Vec3&lt;T&gt; {
    pub x: T,
    pub y: T,
    pub z: T
}
</code></pre>
<h3 id="position"><a class="header" href="#position"><code>Position</code></a></h3>
<hr />
<p>A packed <code>xzy</code> used for position in some packets.</p>
<table><thead><tr><th>x</th><th>z</th><th>y</th></tr></thead><tbody>
<tr><td>i26</td><td>i26</td><td>i12</td></tr>
</tbody></table>
<pre><code class="language-rust noplayground">pub struct Position {
    pub x: i32, //i26
    pub z: i32, //i26
    pub y: i16, //i12
}
</code></pre>
<details>
<summary> reading </summary>
<pre><code class="language-rust noplayground">fn read(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    let base = u64::read(reader)?;
    Ok(Self {
        x: (base &gt;&gt; 38) as i32 &amp; I26_MASK,
        z: (base &gt;&gt; 12) as i32 &amp; I26_MASK,
        y: base as i16 &amp; I12_MASK,
    })
}
</code></pre>
</details>
<details>
<summary> writing </summary>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn write(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    let mut buffer = [0; 8];
    buffer[..26].copy_from_slice(&amp;(self.x &amp; I26_MASK).to_be_bytes()[6..]);
    buffer[26..26 + 26].copy_from_slice(&amp;(self.z &amp; I26_MASK).to_be_bytes()[6..]);
    buffer[26 + 26..].copy_from_slice(&amp;(self.y &amp; I12_MASK).to_be_bytes()[4..]);
    writer.write_all(&amp;buffer)?;
    Ok(())
}
<span class="boring">}
</span></code></pre></pre>
</details>
<h3 id="uuid"><a class="header" href="#uuid"><code>Uuid</code></a></h3>
<hr />
<p>A 16 byte uuid. This can be represented by the <a href="https://github.com/uuid-rs/uuid">uuid</a> crate.</p>
<p><img src="https://img.shields.io/crates/v/uuid.svg" alt="crates.io" /></p>
<table><thead><tr><th>0..16</th></tr></thead><tbody>
<tr><td>[16;u8]</td></tr>
</tbody></table>
<details>
<summary> reading </summary>
<pre><code class="language-rust noplayground">fn read(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    let b = &lt;[u8; 16]&gt;::read(reader)?;
    Ok(uuid::Uuid::from_bytes(b))
}
</code></pre>
</details>
<details>
<summary> writing </summary>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn write(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    let s = self.as_bytes();
    &lt;[u8; 16]&gt;::write(s, writer)
}
<span class="boring">}
</span></code></pre></pre>
</details>
<h3 id="angle"><a class="header" href="#angle"><code>Angle</code></a></h3>
<hr />
<p>A <code>u8</code> representing a rotation angle in steps of 1/256 of a full turn.</p>
<pre><code class="language-rust noplayground">pub struct Angle(u8);
impl Angle {
    pub fn to_deg(&amp;self) -&gt; f32 {
        self.0 / (256.0 / 360.0)
    }
}
</code></pre>
<details>
<summary> reading </summary>
<pre><code class="language-rust noplayground">fn read(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    let b = &lt;[u8; 16]&gt;::read(reader)?;
    Ok(uuid::Uuid::from_bytes(b))
}
</code></pre>
</details>
<details>
<summary> writing </summary>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn write(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;Self&gt; {
    let s = self.as_bytes();
    &lt;[u8; 16]&gt;::write(s, writer)
}
<span class="boring">}
</span></code></pre></pre>
</details><div style="break-before: page; page-break-before: always;"></div><h1 id="packet-structure"><a class="header" href="#packet-structure">Packet Structure</a></h1>
<hr />
<p>The packet structure is depentant on if the server has set compression via the <a href="./login/server/set-compression.html">SetCompression</a> packet.</p>
<h2 id="uncompressed"><a class="header" href="#uncompressed">Uncompressed</a></h2>
<hr />
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>packet_length</td><td><code>VarInt</code></td></tr>
<tr><td>packet_id</td><td><code>VarInt</code></td></tr>
<tr><td>packet</td><td><code>[u8;packet_length]</code></td></tr>
</tbody></table>
<p><code>packet_length</code> is the length of <code>packet_id</code> + <code>packet</code>.</p>
<pre><code class="language-rust noplayground">pub enum StatePackets {
    // Avalible packets in current state
}
fn read_next_packet(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;StatePackets&gt; {
    let mut body = {
        let length = VarInt::read(reader)?;
        let mut buffer = vec![0;length.0 as usize];
        reader.read_exact(&amp;mut buffer)?;
        std::io::Cursor::new(buffer)
    };

    let packet_id = VarInt::read(&amp;mut body)?;
    StatePackets::read_packet(packet_id, &amp;mut body)
}
</code></pre>
<h2 id="compressed"><a class="header" href="#compressed">Compressed</a></h2>
<hr />
<p><code>data</code> is compressed with <code>zlib</code> if <code>decompressed_length &gt; 0</code>.</p>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>packet_length</td><td><code>VarInt</code></td></tr>
<tr><td>decompressed_length</td><td><code>VarInt</code></td></tr>
<tr><td>data (<code>packet_id</code> and <code>packet</code>)</td><td><code>[u8;packet_length - sizeof(decompressed_length)]</code></td></tr>
</tbody></table>
<p><code>packet_length</code> is the length of <code>sizeof(decompressed_length)</code> + <code>data</code>.</p>
<pre><code class="language-rust noplayground">pub enum StatePackets {
    // Avalible packets in current state
}
fn read_next_packet(reader: &amp;mut impl std::io::Read) -&gt; Result&lt;StatePackets&gt; {
    let mut body = {
        let length = VarInt::read(reader)?;
        let mut buffer = vec![0;length.0 as usize];
        reader.read_exact(&amp;mut buffer)?;
        std::io::Cursor::new(buffer)
    };
    let decompressed_length = VarInt::read(&amp;mut body);

    let decompressed_body = if decompressed_length &gt; 0 {
        let mut decompress_buffer = vec![0;decompressed_length.0 as usize];
        decompress_with_zlib(&amp;mut body, &amp;mut decompress_buffer)?;
        std::io::Cursor::new(decompress_buffer)
    } else{
        body
    };

    let packet_id = VarInt::read(reader)?;
    StatePackets::read_packet(packet_id, &amp;mut body)
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="handshaking"><a class="header" href="#handshaking">Handshaking</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="client"><a class="header" href="#client">Client</a></h1>
<p><code>client</code> -&gt; <code>server</code> handshake packets.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x00---handshake"><a class="header" href="#0x00---handshake">0x00 - Handshake</a></h1>
<hr />
<p>Switches the server state to state specified in <a href="handshaking/client/./handshake.html#next_state">next_state</a>.</p>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>protocol_version</td><td><code>u16</code></td></tr>
<tr><td>server_address_length</td><td><code>VarInt</code></td></tr>
<tr><td>server_address</td><td><code>[u8;server_address_length]</code> string</td></tr>
<tr><td>server_port</td><td><code>u16</code></td></tr>
<tr><td><a href="handshaking/client/./handshake.html#next_state">next_state</a></td><td><code>VarInt</code></td></tr>
</tbody></table>
<h2 id="fields"><a class="header" href="#fields">Fields</a></h2>
<hr />
<h3 id="next_state"><a class="header" href="#next_state">next_state</a></h3>
<table><thead><tr><th>value</th><th>name</th></tr></thead><tbody>
<tr><td>1</td><td>Status</td></tr>
<tr><td>2</td><td>Login</td></tr>
</tbody></table>
<p><code>Status</code> will switch to <a href="handshaking/client//status.html"><code>Status</code></a> state.</p>
<p><code>Login</code> will switch to <a href="handshaking/client//login.html"><code>Login</code></a> state.</p>
<h2 id="rust"><a class="header" href="#rust">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">#[value_type(VarInt)]
pub enum HandshakeState {
    Status = 1,
    Login = 2,
}

pub struct Handshake {
    pub protocol_version: VarInt,
    pub server_address: String,
    pub server_port: u16,
    pub next_state: HandshakeState,
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="status"><a class="header" href="#status">Status</a></h1>
<p>This stage is for retrieving server infomation without fully connecting. e.g. for the server list in the minecraft client.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="client-1"><a class="header" href="#client-1">Client</a></h1>
<p><code>client</code> -&gt; <code>server</code> status packets.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x00---statusrequest"><a class="header" href="#0x00---statusrequest">0x00 - StatusRequest</a></h1>
<p>This packet has no fields. Server responds with <a href="status/client//status/server/status-response.html">StatusResponse</a>.</p>
<h2 id="rust-1"><a class="header" href="#rust-1">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct StatusRequest;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x01---pingrequest"><a class="header" href="#0x01---pingrequest">0x01 - PingRequest</a></h1>
<p>Server will respond with <a href="status/client/../server/ping-response.html">PingResponse</a> with the same <code>ping_id</code>.</p>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>ping_id</td><td><code>u64</code></td></tr>
</tbody></table>
<h2 id="rust-2"><a class="header" href="#rust-2">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct PingRequest(u64);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="server"><a class="header" href="#server">Server</a></h1>
<p><code>server</code> -&gt; <code>client</code> status packets.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x00---statusresponse"><a class="header" href="#0x00---statusresponse">0x00 - StatusResponse</a></h1>
<p>In response to <a href="status/server/../client/status-request.html">SatusRequest</a>.</p>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>response_length</td><td><code>VarInt</code></td></tr>
<tr><td>response</td><td><code>[u8;response_length]</code> json string</td></tr>
</tbody></table>
<h2 id="rust-3"><a class="header" href="#rust-3">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct StatusResponse {
    pub response: String,
}
</code></pre>
<h3 id="with-json-deseralization"><a class="header" href="#with-json-deseralization">With json deseralization</a></h3>
<hr />
<pre><code class="language-rust noplayground">#[derive(Deserialize)]
pub struct ServerVersion {
    pub name: String,
    pub protocol: i32,
}

#[derive(Deserialize)]
pub struct ServerPlayer {
    pub name: String,
    pub id: uuid::Uuid,
}

#[derive(Deserialize)]
pub struct ServerPlayers {
    pub max: usize,
    pub online: usize,
    pub sample: Vec&lt;ServerPlayers&gt;,
}

#[derive(Deserialize)]
pub struct StatusBody {
    pub version: ServerVersion,
    pub favicon: String,
    #[serde(rename = &quot;previewsChat&quot;)]
    pub previews_chat: Option&lt;bool&gt;,
    #[serde(rename = &quot;enforcesSecureChat&quot;)]
    pub enforces_secure_chat: Option&lt;bool&gt;,
}

pub struct StatusResponse {
    pub response: Json&lt;StatusBody&gt;,
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x01---pingresponse"><a class="header" href="#0x01---pingresponse">0x01 - PingResponse</a></h1>
<p>In response to <a href="status/server/../client/ping-request.html">PingResponse</a>.</p>
<p><code>ping_id</code> will be the same as <code>ping_id</code> in the request.</p>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>ping_id</td><td><code>u64</code></td></tr>
</tbody></table>
<h2 id="rust-4"><a class="header" href="#rust-4">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct PingResponse(u64);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="login"><a class="header" href="#login">Login</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="client-2"><a class="header" href="#client-2">Client</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x00---loginstart"><a class="header" href="#0x00---loginstart">0x00 - LoginStart</a></h1>
<p>Setting <code>has_signature_data</code> to false (and thus omitting dependant fields) will perform an offline login, only supported by offline servers. </p>
<p>Server will <strong>not</strong> send an <a href="login/client/../server/encryption-request.html">EncryptionRequest</a> if <code>has_signature_data</code> is <code>false</code>.</p>
<table><thead><tr><th>field_name</th><th>type</th><th>condition</th></tr></thead><tbody>
<tr><td>name_length</td><td><code>varInt</code></td><td></td></tr>
<tr><td>name</td><td><code>[u8;name_length]</code> string</td><td></td></tr>
<tr><td>has_signature_data</td><td><code>bool</code></td><td></td></tr>
<tr><td>sig_timestamp</td><td><code>u64</code></td><td><code>has_signature_data</code></td></tr>
<tr><td>public_key_length</td><td><code>VarInt</code></td><td><code>has_signature_data</code></td></tr>
<tr><td>public_key</td><td><code>[u8;public_key_length]</code></td><td><code>has_signature_data</code></td></tr>
<tr><td>signature_length</td><td><code>VarInt</code></td><td><code>has_signature_data</code></td></tr>
<tr><td>signature</td><td><code>[u8;signature_length]</code></td><td></td></tr>
<tr><td>has_player_uuid</td><td><code>bool</code></td><td></td></tr>
<tr><td>player_uuid</td><td><code>[8;16]</code></td><td><code>has_player_uuid</code></td></tr>
</tbody></table>
<h2 id="rust-5"><a class="header" href="#rust-5">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct SignatureData {
    pub timestamp: u64,
    pub public_key: Vec&lt;u8&gt;,
    pub signature: Vec&lt;u8&gt;,
}

pub struct LoginStart {
    pub name: String,
    pub sig_data: Option&lt;SignatureData&gt;,
    pub player_uuid: Option&lt;uuid::Uuid&gt;,
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x01---encryptionresponse"><a class="header" href="#0x01---encryptionresponse">0x01 - EncryptionResponse</a></h1>
<p>if <code>has_verify_token</code> then verify token is supplied, otherwise salt and signature data is supplied.</p>
<table><thead><tr><th>field_name</th><th>type</th><th>condition</th></tr></thead><tbody>
<tr><td>shared_secret_length</td><td><code>VarInt</code></td><td></td></tr>
<tr><td>shared_secret_length</td><td><code>[u8;shared_secret_length]</code></td><td></td></tr>
<tr><td>has_verify_token</td><td><code>bool</code></td><td></td></tr>
<tr><td>verify_token_length</td><td><code>VarInt</code></td><td><code>has_verify_token</code></td></tr>
<tr><td>verify_token</td><td><code>[u8;verify_token_length]</code></td><td><code>has_verify_token</code></td></tr>
<tr><td>salt</td><td><code>i64</code></td><td><code>!has_verify_token</code></td></tr>
<tr><td>signature_length</td><td><code>VarInt</code></td><td><code>!has_verify_token</code></td></tr>
<tr><td>signature</td><td><code>[u8;signature_length]</code></td><td><code>!has_verify_token</code></td></tr>
</tbody></table>
<h2 id="rust-6"><a class="header" href="#rust-6">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct SignatureInfo {
    pub salt: i64,
    pub signature: Vec&lt;u8&gt;,
}

pub struct EncryptionResponse {
    pub shared_secret: Vec&lt;u8&gt;,
    pub has_verify_token: bool,
    #[read(read_verify_token, has_verify_token)]
    pub verify_token: Option&lt;Vec&lt;u8&gt;&gt;,
    #[read(read_signature, has_verify_token)]
    pub signature: Option&lt;SignatureInfo&gt;,
}

fn read_verify_token&lt;const PV: usize&gt;(
    reader: &amp;mut impl std::io::Read,
    has_verify_token: &amp;bool,
) -&gt; Result&lt;Option&lt;Vec&lt;u8&gt;&gt;&gt; {
    if *has_verify_token {
        Ok(Some(Vec::read(reader)?))
    } else {
        Ok(None)
    }
}
fn read_signature&lt;const PV: usize&gt;(
    reader: &amp;mut impl std::io::Read,
    has_verify_token: &amp;bool,
) -&gt; Result&lt;Option&lt;SignatureInfo&gt;&gt; {
    let r = if *has_verify_token {
        None
    } else {
        Some(SignatureInfo {
            salt: i64::read(reader)?,
            signature: Vec::read(reader)?,
        })
    };
    Ok(r)
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="server-1"><a class="header" href="#server-1">Server</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x00---disconnect"><a class="header" href="#0x00---disconnect">0x00 - Disconnect</a></h1>
<p>The client should disconnect after recieving this packet.</p>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>reason_length</td><td><code>VarInt</code></td></tr>
<tr><td>reason</td><td><code>[u8;response_length]</code> chat string</td></tr>
</tbody></table>
<h2 id="rust-7"><a class="header" href="#rust-7">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct Disconnect(Chat);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x01---encryptionrequest"><a class="header" href="#0x01---encryptionrequest">0x01 - EncryptionRequest</a></h1>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>server_id_length</td><td><code>VarInt</code></td></tr>
<tr><td>server_id</td><td><code>[u8;server_id_length]</code> string</td></tr>
<tr><td>public_key_length</td><td><code>VarInt</code></td></tr>
<tr><td>public_key</td><td><code>[u8;server_id_length]</code></td></tr>
<tr><td>verify_token_length</td><td><code>VarInt</code></td></tr>
<tr><td>verify_token</td><td><code>[u8;server_id_length]</code></td></tr>
</tbody></table>
<h2 id="rust-8"><a class="header" href="#rust-8">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct EncryptionRequest {
    pub server_id: String,
    pub public_key: Vec&lt;u8&gt;,
    pub verify_token: Vec&lt;u8&gt;,
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x02---loginsuccess"><a class="header" href="#0x02---loginsuccess">0x02 - LoginSuccess</a></h1>
<p>State is changed to <a href="login/server/../../play.html">Play</a> after this packet.</p>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>uuid_length</td><td><code>VarInt</code></td></tr>
<tr><td>uuid</td><td><code>[u8;16]</code></td></tr>
<tr><td>username_length</td><td><code>VarInt</code></td></tr>
<tr><td>username</td><td><code>[u8;signature_length]</code> string</td></tr>
<tr><td>properties_count</td><td><code>VarInt</code></td></tr>
<tr><td>properties</td><td><code>[</code><a href="login/server/./login-success.html#property">property</a><code>;properties_count]</code></td></tr>
</tbody></table>
<h3 id="property"><a class="header" href="#property">Property</a></h3>
<table><thead><tr><th>field_name</th><th>type</th><th>condition</th></tr></thead><tbody>
<tr><td>name_length</td><td><code>VarInt</code></td><td></td></tr>
<tr><td>name</td><td><code>[u8;name_length]</code>  string</td><td></td></tr>
<tr><td>value_length</td><td><code>VarInt</code></td><td></td></tr>
<tr><td>value</td><td><code>[u8;name_length]</code>  string</td><td></td></tr>
<tr><td>has_signature</td><td><code>bool</code></td><td></td></tr>
<tr><td>signature_length</td><td><code>VarInt</code></td><td><code>has_signature</code></td></tr>
<tr><td>signature</td><td><code>[u8;signature_length]</code>  string</td><td><code>has_signature</code></td></tr>
</tbody></table>
<h2 id="rust-9"><a class="header" href="#rust-9">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct Property {
    pub name: String,
    pub value: String,
    pub signature: Option&lt;String&gt;,
}

pub struct LoginSuccess {
    pub uuid: uuid::Uuid,
    pub username: String,
    pub properties: Vec&lt;Properties&gt;,
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x03---setcompression"><a class="header" href="#0x03---setcompression">0x03 - SetCompression</a></h1>
<p>All packets after recieving this will be in <a href="login/server/../../packet-structure.html#compressed">compressed packet format</a>.</p>
<p>Data should only be compressed if the body of the packet is greater than <code>threshold</code>.</p>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>threshold</td><td><code>VarInt</code></td></tr>
</tbody></table>
<h2 id="rust-10"><a class="header" href="#rust-10">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct SetCompression {
    pub threshold: VarInt,
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="play"><a class="header" href="#play">Play</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="client-3"><a class="header" href="#client-3">Client</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="server-2"><a class="header" href="#server-2">Server</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x00---spawnentity"><a class="header" href="#0x00---spawnentity">0x00 - SpawnEntity</a></h1>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>entity_id</td><td><code>VarInt</code></td></tr>
<tr><td>entity_uuid</td><td><code>[u8;16]</code></td></tr>
<tr><td>entity_type</td><td><code>VarInt</code></td></tr>
<tr><td>position</td><td><code>[u8;8]</code> <a href="play/server/../../data-types.html#position">position</a></td></tr>
<tr><td>pitch</td><td><code>u8</code> <a href="play/server/../../data-types.html#angle">angle</a></td></tr>
<tr><td>yaw</td><td><code>u8</code> <a href="play/server/../../data-types.html#angle">angle</a></td></tr>
<tr><td>data</td><td><code>VarInt</code></td></tr>
<tr><td>velocity_x</td><td><code>i16</code></td></tr>
<tr><td>velocity_y</td><td><code>i16</code></td></tr>
<tr><td>velocity_z</td><td><code>i16</code></td></tr>
</tbody></table>
<h2 id="rust-11"><a class="header" href="#rust-11">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct SpawnEntity {
    pub entity_id: VarInt,
    pub entity_uuid: uuid::Uuid,
    pub entity_type: VarInt,
    pub position: Position,
    pub pitch: Angle,
    pub yaw: Angle,
    pub data: VarInt,
    pub velocity: Vec3&lt;i16&gt;,
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x02---spawnplayer"><a class="header" href="#0x02---spawnplayer">0x02 - SpawnPlayer</a></h1>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>entity_id</td><td><code>VarInt</code></td></tr>
<tr><td>player_uuid</td><td><code>[u8;16]</code></td></tr>
<tr><td>position</td><td><code>[u8;8]</code> <a href="play/server/../../data-types.html#position">position</a></td></tr>
<tr><td>pitch</td><td><code>u8</code> <a href="play/server/../../data-types.html#angle">angle</a></td></tr>
<tr><td>yaw</td><td><code>u8</code> <a href="play/server/../../data-types.html#angle">angle</a></td></tr>
</tbody></table>
<h2 id="rust-12"><a class="header" href="#rust-12">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">pub struct SpawnPlayer {
    pub entity_id: VarInt,
    pub player_uuid: uuid::Uuid,
    pub position: Position,
    pub yaw: Angle,
    pub pitch: Angle,
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="0x03---entityanimation"><a class="header" href="#0x03---entityanimation">0x03 - EntityAnimation</a></h1>
<table><thead><tr><th>field_name</th><th>type</th></tr></thead><tbody>
<tr><td>entity_id</td><td><code>VarInt</code></td></tr>
<tr><td><a href="play/server/./entity-animation.html#animation">animation</a></td><td><code>u8</code></td></tr>
</tbody></table>
<h2 id="fields-1"><a class="header" href="#fields-1">Fields</a></h2>
<hr />
<h3 id="animation"><a class="header" href="#animation">animation</a></h3>
<table><thead><tr><th>value</th><th>name</th></tr></thead><tbody>
<tr><td>0</td><td>SwingMainArm</td></tr>
<tr><td>1</td><td>TakeDamage</td></tr>
<tr><td>2</td><td>LeaveBed</td></tr>
<tr><td>3</td><td>SwingOffhand</td></tr>
<tr><td>4</td><td>CriticalEffect</td></tr>
<tr><td>5</td><td>MagicCriticalEfect</td></tr>
</tbody></table>
<h2 id="rust-13"><a class="header" href="#rust-13">Rust</a></h2>
<hr />
<pre><code class="language-rust noplayground">#[repr(u8)]
pub enum Animation {
    SwingMainArm = 0,
    TakeDamage = 1,
    LeaveBed = 2,
    SwingOffhand = 3,
    CriticalEffect=4,
    MagicCriticalEfect = 5
}

pub struct EntityAnimation {
    pub entity_id: VarInt,
    pub animation: Animation,
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
